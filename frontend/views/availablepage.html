<!DOCTYPE html>
<html>
<head>
  <title>ReWear - Available Items</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: linear-gradient(to right, #fffde7, #e8f5e9);
      min-height: 100vh;
    }

    /* Header Section */
    .header {
      background-color: white;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      color: #2e7d32;
      font-size: 28px;
      font-weight: bold;
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      gap: 30px;
    }

    .nav-links a {
      color: #388e3c;
      text-decoration: none;
      font-size: 16px;
      font-weight: 500;
      transition: color 0.3s ease;
    }

    .nav-links a:hover {
      color: #2e7d32;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .points-badge {
      background-color: #e8f5e9;
      color: #2e7d32;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.3s ease;
    }

    .points-badge:hover {
      transform: scale(1.05);
      background-color: #c8e6c9;
    }

    .points-badge.animate {
      animation: pointsGlow 0.8s ease-in-out;
    }

    @keyframes pointsGlow {
      0%, 100% { background-color: #e8f5e9; }
      50% { background-color: #4caf50; color: white; }
    }

    .user-profile {
      display: flex;
      align-items: center;
      gap: 12px;
      background: rgba(255, 255, 255, 0.9);
      padding: 8px 15px;
      border-radius: 25px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .user-profile:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .user-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      background: linear-gradient(135deg, #388e3c, #2e7d32);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 14px;
    }

    .user-details {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }

    .user-name {
      font-weight: bold;
      color: #2e7d32;
      font-size: 14px;
      margin: 0;
    }

    .user-stats {
      font-size: 11px;
      color: #666;
      margin: 0;
    }

    /* Main Content */
    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .page-title {
      color: #2e7d32;
      font-size: 36px;
      text-align: center;
      margin-bottom: 10px;
    }

    .page-subtitle {
      text-align: center;
      color: #666;
      font-size: 18px;
      margin-bottom: 40px;
    }

    /* Filter Section */
    .filter-section {
      background: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
    }

    .filter-title {
      color: #2e7d32;
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .filter-row {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      align-items: center;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .filter-label {
      font-size: 14px;
      color: #666;
      font-weight: bold;
    }

    .filter-select {
      padding: 8px 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      background: white;
      cursor: pointer;
      transition: border-color 0.3s ease;
    }

    .filter-select:focus {
      outline: none;
      border-color: #388e3c;
    }

    .search-box {
      padding: 12px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 25px;
      font-size: 16px;
      width: 300px;
      transition: border-color 0.3s ease;
    }

    .search-box:focus {
      outline: none;
      border-color: #388e3c;
    }

    .clear-filters {
      background: #f44336;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.3s ease;
    }

    .clear-filters:hover {
      background: #d32f2f;
    }

    /* Stats Section */
    .stats-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      text-align: center;
      transition: transform 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-3px);
    }

    .stat-icon {
      font-size: 36px;
      margin-bottom: 10px;
    }

    .stat-number {
      font-size: 24px;
      font-weight: bold;
      color: #2e7d32;
      margin-bottom: 5px;
    }

    .stat-label {
      font-size: 14px;
      color: #666;
    }

    /* Item Grid */
    .items-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .item-card {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }

    .item-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .item-image {
      width: 100%;
      height: 200px;
      background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
      color: #388e3c;
      position: relative;
    }

    .item-status {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #4caf50;
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
    }

    .coin-value {
      position: absolute;
      top: 10px;
      left: 10px;
      background: #ff9800;
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
    }

    .item-info {
      padding: 20px;
    }

    .item-title {
      font-size: 18px;
      font-weight: bold;
      color: #2e7d32;
      margin-bottom: 5px;
    }

    .item-description {
      color: #666;
      font-size: 14px;
      margin-bottom: 10px;
    }

    .item-details {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .item-size {
      background: #e8f5e9;
      color: #2e7d32;
      padding: 4px 8px;
      border-radius: 10px;
      font-size: 12px;
      font-weight: bold;
    }

    .item-condition {
      font-size: 12px;
      color: #666;
    }

    .item-owner {
      font-size: 12px;
      color: #888;
      margin-bottom: 15px;
    }

    .swap-button {
      width: 100%;
      background: #388e3c;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .swap-button:hover {
      background: #2e7d32;
    }

    .swap-button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
    }

    .modal-content {
      background-color: white;
      margin: 5% auto;
      padding: 30px;
      border-radius: 15px;
      width: 90%;
      max-width: 500px;
      position: relative;
      animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .close {
      position: absolute;
      right: 20px;
      top: 20px;
      font-size: 24px;
      cursor: pointer;
      color: #666;
      transition: color 0.3s ease;
    }

    .close:hover {
      color: #2e7d32;
    }

    .modal-title {
      color: #2e7d32;
      font-size: 24px;
      margin-bottom: 20px;
      text-align: center;
    }

    .modal-item-details {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }

    .modal-item-image {
      width: 120px;
      height: 120px;
      background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      color: #388e3c;
    }

    .modal-item-info {
      flex: 1;
    }

    .modal-item-title {
      font-size: 20px;
      font-weight: bold;
      color: #2e7d32;
      margin-bottom: 10px;
    }

    .modal-item-description {
      color: #666;
      margin-bottom: 10px;
    }

    .coin-reward {
      background: #4caf50;
      color: white;
      padding: 10px 20px;
      border-radius: 20px;
      text-align: center;
      margin: 20px 0;
      font-size: 18px;
      font-weight: bold;
    }

    .modal-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-primary {
      background: #388e3c;
      color: white;
    }

    .btn-primary:hover {
      background: #2e7d32;
    }

    .btn-secondary {
      background: #e0e0e0;
      color: #333;
    }

    .btn-secondary:hover {
      background: #d0d0d0;
    }

    /* Success Animation */
    .success-message {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #4caf50;
      color: white;
      padding: 20px 40px;
      border-radius: 15px;
      font-size: 18px;
      font-weight: bold;
      box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
      z-index: 1001;
      animation: successPop 0.6s ease;
    }

    @keyframes successPop {
      0% {
        transform: translate(-50%, -50%) scale(0.5);
        opacity: 0;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.1);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
    }

    .no-items {
      text-align: center;
      color: #666;
      font-size: 18px;
      margin: 60px 0;
    }

    .no-items-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .nav-container {
        flex-direction: column;
        gap: 15px;
      }

      .nav-links {
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
      }

      .user-info {
        flex-direction: column;
        gap: 10px;
      }

      .items-grid {
        grid-template-columns: 1fr;
      }

      .page-title {
        font-size: 28px;
      }

      .filter-row {
        flex-direction: column;
        align-items: stretch;
      }

      .search-box {
        width: 100%;
      }

      .stats-section {
        grid-template-columns: 1fr;
      }

      .modal-content {
        width: 95%;
        margin: 10% auto;
        padding: 20px;
      }

      .modal-item-details {
        flex-direction: column;
        align-items: center;
      }

      .modal-buttons {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  <!-- Header Section -->
  <div class="header">
    <div class="nav-container">
      <a href="#" class="logo">ReWear</a>
      <div class="nav-links">
        <a href="LandingPage.html">Home</a>
        <a href="browse.html">Browse</a>
        <a href="availablepage.html" style="color: #2e7d32; text-decoration: underline;">Available Items</a>
        <a href="swap.html">Swapping</a>
        <a href="add_items.html">Add Items</a>
        <a href="dashboard.html">Dashboard</a>
        <a href="index.html">Logout</a>
      </div>
      <div class="user-info">
        <div class="points-badge" id="pointsBadge" onclick="showPointsInfo()">
          <span id="point-balance">500</span> Points
        </div>
        <div class="user-profile" onclick="toggleUserMenu()">
          <div class="user-avatar" id="userAvatar">JD</div>
          <div class="user-details">
            <div class="user-name" id="userName">Jay Patel</div>
            <div class="user-stats" id="userStats">5 items ‚Ä¢ 3 swaps</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <h1 class="page-title">Available Items</h1>
    <div class="page-subtitle">Browse amazing items from our community</div>

    <!-- Stats Section -->
    <div class="stats-section">
      <div class="stat-card">
        <div class="stat-icon">üëï</div>
        <div class="stat-number" id="totalItems">247</div>
        <div class="stat-label">Total Items</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">‚ú®</div>
        <div class="stat-number" id="newToday">18</div>
        <div class="stat-label">New Today</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üî•</div>
        <div class="stat-number" id="popularItems">32</div>
        <div class="stat-label">Popular Items</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ü™ô</div>
        <div class="stat-number" id="avgCoins">28</div>
        <div class="stat-label">Avg Coins</div>
      </div>
    </div>

    <!-- Filter Section -->
    <div class="filter-section">
      <div class="filter-title">üîç Filter Items</div>
      <div class="filter-row">
        <div class="filter-group">
          <label class="filter-label">Category</label>
          <select class="filter-select" id="categoryFilter" onchange="applyFilters()">
            <option value="">All Categories</option>
            <option value="clothing">Clothing</option>
            <option value="shoes">Shoes</option>
            <option value="accessories">Accessories</option>
            <option value="bags">Bags</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label">Size</label>
          <select class="filter-select" id="sizeFilter" onchange="applyFilters()">
            <option value="">All Sizes</option>
            <option value="XS">XS</option>
            <option value="S">S</option>
            <option value="M">M</option>
            <option value="L">L</option>
            <option value="XL">XL</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label">Condition</label>
          <select class="filter-select" id="conditionFilter" onchange="applyFilters()">
            <option value="">All Conditions</option>
            <option value="Like New">Like New</option>
            <option value="Excellent">Excellent</option>
            <option value="Good">Good</option>
            <option value="Fair">Fair</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label">Sort By</label>
          <select class="filter-select" id="sortFilter" onchange="applyFilters()">
            <option value="newest">Newest First</option>
            <option value="oldest">Oldest First</option>
            <option value="coins-high">Highest Coins</option>
            <option value="coins-low">Lowest Coins</option>
            <option value="popular">Most Popular</option>
          </select>
        </div>
        <input type="text" class="search-box" id="searchBox" placeholder="Search items..." onkeyup="applyFilters()">
        <button class="clear-filters" onclick="clearFilters()">Clear All</button>
      </div>
    </div>

    <!-- Items Grid -->
    <div class="items-grid" id="itemsGrid">
      <!-- Items will be populated by JavaScript -->
    </div>
  </div>

  <!-- Swap Modal -->
  <div id="swapModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h2 class="modal-title">Confirm Swap</h2>
      <div class="modal-item-details">
        <div class="modal-item-image" id="modalItemImage">üëï</div>
        <div class="modal-item-info">
          <div class="modal-item-title" id="modalItemTitle">Item Title</div>
          <div class="modal-item-description" id="modalItemDescription">Item Description</div>
          <div><strong>Owner:</strong> <span id="modalItemOwner">Owner Name</span></div>
          <div><strong>Condition:</strong> <span id="modalItemCondition">Good</span></div>
          <div><strong>Size:</strong> <span id="modalItemSize">M</span></div>
        </div>
      </div>
      <div class="coin-reward">
        ü™ô You will earn <span id="coinReward">25</span> coins for this swap!
      </div>
      <div class="modal-buttons">
        <button class="btn btn-primary" onclick="confirmSwap()">Confirm Swap</button>
        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    // Sample data
    let userData = {
      name: 'Jay Patel',
      avatar: 'JD',
      itemsListed: 5,
      swapsCompleted: 3,
      points: 500,
      rating: 4.8,
      reviews: 23
    };

    let allItems = [
      {
        id: 1,
        title: 'Vintage Denim Jacket',
        description: 'Classic 90s style denim jacket in excellent condition',
        size: 'M',
        condition: 'Excellent',
        owner: 'Sarah Johnson',
        image: 'üß•',
        coins: 30,
        category: 'clothing',
        dateAdded: '2024-01-15',
        popularity: 85
      },
      {
        id: 2,
        title: 'Floral Summer Dress',
        description: 'Beautiful floral print dress, perfect for summer',
        size: 'S',
        condition: 'Good',
        owner: 'Emma Wilson',
        image: 'üëó',
        coins: 25,
        category: 'clothing',
        dateAdded: '2024-01-14',
        popularity: 72
      },
      {
        id: 3,
        title: 'Leather Boots',
        description: 'Genuine leather boots, barely worn',
        size: '8',
        condition: 'Like New',
        owner: 'Mike Davis',
        image: 'üë¢',
        coins: 35,
        category: 'shoes',
        dateAdded: '2024-01-13',
        popularity: 90
      },
      {
        id: 4,
        title: 'Wool Sweater',
        description: 'Cozy wool sweater for cold weather',
        size: 'L',
        condition: 'Good',
        owner: 'Lisa Chen',
        image: 'üß∂',
        coins: 20,
        category: 'clothing',
        dateAdded: '2024-01-12',
        popularity: 65
      },
      {
        id: 5,
        title: 'Designer Handbag',
        description: 'Authentic designer handbag in mint condition',
        size: 'One Size',
        condition: 'Excellent',
        owner: 'Anna Martinez',
        image: 'üëú',
        coins: 50,
        category: 'bags',
        dateAdded: '2024-01-11',
        popularity: 95
      },
      {
        id: 6,
        title: 'Casual T-Shirt',
        description: 'Comfortable cotton t-shirt',
        size: 'M',
        condition: 'Good',
        owner: 'Tom Anderson',
        image: 'üëï',
        coins: 15,
        category: 'clothing',
        dateAdded: '2024-01-10',
        popularity: 45
      },
      {
        id: 7,
        title: 'Silk Scarf',
        description: 'Elegant silk scarf with beautiful patterns',
        size: 'One Size',
        condition: 'Like New',
        owner: 'Grace Kim',
        image: 'üß£',
        coins: 22,
        category: 'accessories',
        dateAdded: '2024-01-09',
        popularity: 78
      },
      {
        id: 8,
        title: 'Running Shoes',
        description: 'Comfortable running shoes, great for exercise',
        size: '9',
        condition: 'Good',
        owner: 'Alex Johnson',
        image: 'üëü',
        coins: 28,
        category: 'shoes',
        dateAdded: '2024-01-08',
        popularity: 82
      },
      {
        id: 9,
        title: 'Leather Belt',
        description: 'Genuine leather belt in black',
        size: '32',
        condition: 'Excellent',
        owner: 'David Brown',
        image: 'üéΩ',
        coins: 18,
        category: 'accessories',
        dateAdded: '2024-01-07',
        popularity: 60
      },
      {
        id: 10,
        title: 'Winter Coat',
        description: 'Warm winter coat, perfect for cold weather',
        size: 'L',
        condition: 'Good',
        owner: 'Rachel Green',
        image: 'üß•',
        coins: 40,
        category: 'clothing',
        dateAdded: '2024-01-06',
        popularity: 88
      },
      {
        id: 11,
        title: 'Sunglasses',
        description: 'Stylish sunglasses with UV protection',
        size: 'One Size',
        condition: 'Like New',
        owner: 'Chris Wilson',
        image: 'üï∂Ô∏è',
        coins: 25,
        category: 'accessories',
        dateAdded: '2024-01-05',
        popularity: 75
      },
      {
        id: 12,
        title: 'Sneakers',
        description: 'Trendy sneakers in white',
        size: '10',
        condition: 'Good',
        owner: 'Jennifer Lee',
        image: 'üëü',
        coins: 32,
        category: 'shoes',
        dateAdded: '2024-01-04',
        popularity: 80
      }
    ];

    let filteredItems = [...allItems];
    let currentItem = null;

    // Initialize the page
    function init() {
      updateUserInfo();
      updateStats();
      renderItems();
    }

    // Update user information
    function updateUserInfo() {
      document.getElementById('userName').textContent = userData.name;
      document.getElementById('userAvatar').textContent = userData.avatar;
      document.getElementById('userStats').textContent = `${userData.itemsListed} items ‚Ä¢ ${userData.swapsCompleted} swaps`;
      document.getElementById('point-balance').textContent = userData.points;
    }

    // Update statistics
    function updateStats() {
      document.getElementById('totalItems').textContent = allItems.length;
      document.getElementById('newToday').textContent = allItems.filter(item => {
        const today = new Date().toISOString().split('T')[0];
        return item.dateAdded === today;
      }).length;
      document.getElementById('popularItems').textContent = allItems.filter(item => item.popularity > 75).length;
      document.getElementById('avgCoins').textContent = Math.round(allItems.reduce((sum, item) => sum + item.coins, 0) / allItems.length);
    }

    // Render items
    function renderItems() {
      const grid = document.getElementById('itemsGrid');
      
      if (filteredItems.length === 0) {
        grid.innerHTML = `
          <div class="no-items">
            <div class="no-items-icon">üîç</div>
            <div>No items match your search criteria</div>
          </div>
        `;
        return;
      }

      grid.innerHTML = filteredItems.map(item => `
        <div class="item-card" onclick="openSwapModal(${item.id})">
          <div class="item-image">
            <div class="coin-value">ü™ô ${item.coins}</div>
            <div class="item-status">Available</div>
            ${item.image}
          </div>
          <div class="item-info">
            <div class="item-title">${item.title}</div>
            <div class="item-description">${item.description}</div>
            <div class="item-details">
              <div class="item-size">${item.size}</div>
              <div class="item-condition">${item.condition}</div>
            </div>
            <div class="item-owner">Listed by ${item.owner}</div>
            <button class="swap-button" onclick="event.stopPropagation(); openSwapModal(${item.id})">
              Swap Item
            </button>
          </div>
        </div>
      `).join('');
    }

    // Apply filters
    function applyFilters() {
      const category = document.getElementById('categoryFilter').value;
      const size = document.getElementById('sizeFilter').value;
      const condition = document.getElementById('conditionFilter').value;
      const sort = document.getElementById('sortFilter').value;
      const search = document.getElementById('searchBox').value.toLowerCase();

      // Filter items
      filteredItems = allItems.filter(item => {
        const matchesCategory = !category || item.category === category;
        const matchesSize = !size || item.size === size;
        const matchesCondition = !condition || item.condition === condition;
        const matchesSearch = !search || 
          item.title.toLowerCase().includes(search) ||
          item.description.toLowerCase().includes(search) ||
          item.owner.toLowerCase().includes(search);

        return matchesCategory && matchesSize && matchesCondition && matchesSearch;
      });

      // Sort items
      filteredItems.sort((a, b) => {
        switch (sort) {
          case 'newest':
            return new Date(b.dateAdded) - new Date(a.dateAdded);
          case 'oldest':
            return new Date(a.dateAdded) - new Date(b.dateAdded);
          case 'coins-high':
            return b.coins - a.coins;
          case 'coins-low':
            return a.coins - b.coins;
          case 'popular':
            return b.popularity - a.popularity;
          default:
            return 0;
        }
      });

      renderItems();
    }

    // Clear all filters
    function clearFilters() {
      document.getElementById('categoryFilter').value = '';
      document.getElementById('sizeFilter').value = '';
      document.getElementById('conditionFilter').value = '';
      document.getElementById('sortFilter').value = 'newest';
      document.getElementById('searchBox').value = '';
      filteredItems = [...allItems];
      renderItems();
    }

    // Open swap modal
    function openSwapModal(itemId) {
      currentItem = allItems.find(item => item.id === itemId);
      if (!currentItem) return;

      document.getElementById('modalItemImage').textContent = currentItem.image;
      document.getElementById('modalItemTitle').textContent = currentItem.title;
      document.getElementById('modalItemDescription').textContent = currentItem.description;
      document.getElementById('modalItemOwner').textContent = currentItem.owner;
      document.getElementById('modalItemCondition').textContent = currentItem.condition;
      document.getElementById('modalItemSize').textContent = currentItem.size;
      document.getElementById('coinReward').textContent = currentItem.coins;

      document.getElementById('swapModal').style.display = 'block';
    }

    // Close modal
    function closeModal() {
      document.getElementById('swapModal').style.display = 'none';
      currentItem = null;
    }

    // Confirm swap
    function confirmSwap() {
      if (!currentItem) return;

      // Update user points
      userData.points += currentItem.coins;
      userData.swapsCompleted += 1;

      // Update UI
      updateUserInfo();
      
      // Animate points badge
      const pointsBadge = document.getElementById('pointsBadge');
      pointsBadge.classList.add('animate');
      setTimeout(() => {
        pointsBadge.classList.remove('animate');
      }, 800);

      // Show success message
      showSuccessMessage(`Successfully swapped ${currentItem.title}! You earned ${currentItem.coins} coins.`);

      // Remove item from available items
      const itemIndex = allItems.findIndex(item => item.id === currentItem.id);
      if (itemIndex > -1) {
        allItems.splice(itemIndex, 1);
      }

      // Update filtered items
      const filteredIndex = filteredItems.findIndex(item => item.id === currentItem.id);
      if (filteredIndex > -1) {
        filteredItems.splice(filteredIndex, 1);
      }

      // Update stats and re-render
      updateStats();
      renderItems();
      closeModal();
    }

    // Show success message
    function showSuccessMessage(message) {
      const successDiv = document.createElement('div');
      successDiv.className = 'success-message';
      successDiv.textContent = message;
      document.body.appendChild(successDiv);

      setTimeout(() => {
        document.body.removeChild(successDiv);
      }, 3000);
    }

    // Show points info
    function showPointsInfo() {
      alert(`You have ${userData.points} points!\n\nPoints can be used for:\n‚Ä¢ Priority listings\n‚Ä¢ Featured items\n‚Ä¢ Special rewards\n‚Ä¢ Exclusive items`);
    }

    // Toggle user menu
    function toggleUserMenu() {
      alert(`User Profile\n\nName: ${userData.name}\nItems Listed: ${userData.itemsListed}\nSwaps Completed: ${userData.swapsCompleted}\nPoints: ${userData.points}\nRating: ${userData.rating}/5 (${userData.reviews} reviews)`);
    }

    // Close modal when clicking outside
    window.onclick = function(event) {
      const modal = document.getElementById('swapModal');
      if (event.target === modal) {
        closeModal();
      }
    }

    // Keyboard shortcuts
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        closeModal();
      }
    });

    // Initialize the page when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>